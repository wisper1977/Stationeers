alias ArcFurnace d0
alias Vent d5

alias hasInput r0
alias hasOutput r1
alias ventTimer r2
alias tmp r3

define VENT_TIME 30

start:
s ArcFurnace On 1
s Vent Mode 1
l ventTimer 0

loop:
ls hasInput ArcFurnace 0 Occupied
ls hasOutput ArcFurnace 1 Occupied
beq hasInput 0 noActivate
bne hasOutput 0 noActivate
s ArcFurnace Activate 1
l ventTimer VENT_TIME

noActivate:
sgtz tmp ventTimer
s Vent On tmp
beq ventTimer 0 endLoop
sub ventTimer ventTimer 1

endLoop:
yield
j loop
